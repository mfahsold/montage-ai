apiVersion: v1
kind: ConfigMap
metadata:
  name: montage-ai-config
  namespace: montage-ai
  labels:
    app.kubernetes.io/name: montage-ai
data:
  # Creative Direction
  CUT_STYLE: "dynamic"
  CREATIVE_PROMPT: ""
  
  # AI / LLM Configuration
  # Priority: OPENAI_API_BASE > GOOGLE_API_KEY > CGPU > OLLAMA
  
  # Option 1: OpenAI-compatible endpoint (KubeAI, vLLM, LocalAI) - RECOMMENDED
  OPENAI_API_BASE: "http://kubeai.kubeai-system.svc.cluster.local/openai/v1"
  OPENAI_API_KEY: "not-needed"
  OPENAI_MODEL: "qwen3-axera-4b"  # Creative Director (matches kubeai /models)
  OPENAI_VISION_MODEL: ""  # Leave empty unless a vision model is available
  
  # Option 2: Ollama (local fallback)
  OLLAMA_HOST: "http://ollama.montage-ai.svc.cluster.local:11434"
  OLLAMA_MODEL: "llava"
  DIRECTOR_MODEL: "llama3.1:70b"
  
  # Option 3: cgpu (cloud GPU + Gemini LLM)
  CGPU_ENABLED: "true"
  CGPU_HOST: "cgpu-server.montage-ai.svc.cluster.local"
  CGPU_PORT: "8080"
  CGPU_MODEL: "gemini-2.0-flash"
  CGPU_GPU_ENABLED: "true"
  CGPU_TIMEOUT: "600"
  CGPU_MAX_CONCURRENCY: "1"
  
  # Enhancement Settings
  STABILIZE: "true"
  UPSCALE: "true"
  ENHANCE: "true"
  COLORLEVELS: "true"
  LUMA_NORMALIZE: "true"
  ENABLE_AI_FILTER: "true"
  PRESERVE_ASPECT: "false"  # true=letterbox/pillarbox, false=crop to fill
  CAPTIONS: "true"
  CAPTIONS_STYLE: "youtube"
  VOICE_ISOLATION: "true"
  NOISE_REDUCTION: "false"  # DeepFilterNet noise removal (lighter than voice_isolation)
  NOISE_REDUCTION_STRENGTH: "100"  # 0-100, higher = more aggressive
  EPISODIC_MEMORY: "true"
  CREATIVE_LOOP: "true"
  
  # Output Configuration
  NUM_VARIANTS: "1"
  VERBOSE: "true"
  EXPORT_TIMELINE: "true"  # Export OTIO/EDL/CSV for professional NLE software
  GENERATE_PROXIES: "false"
  QUALITY_PROFILE: "standard"
  
  # Performance / Hardware Acceleration
  FFMPEG_HWACCEL: "auto"  # auto, nvenc, nvmpi, vaapi, qsv, none
  FFMPEG_THREADS: "0"
  FFMPEG_PRESET: "medium"
  PARALLEL_ENHANCE: "true"
  MAX_PARALLEL_JOBS: "8"
  USE_GPU: "auto"
  MONITOR_MEM_INTERVAL: "5"
  MAX_SCENE_REUSE: "3"
  USE_FFMPEG_MCP: "false"
  FFMPEG_MCP_ENDPOINT: "http://ffmpeg-mcp.montage-ai.svc.cluster.local:8080"
  FINAL_CRF: "18"               # Quality: 18=master, 23=fast preview
  NORMALIZE_CLIPS: "true"       # Normalize fps/pix_fmt before concat
  ENABLE_XFADE: ""              # "", true, false ("" = follow style)
  XFADE_DURATION: "0.3"         # Seconds, only if ENABLE_XFADE=true
  
  # Deep Analysis
  DEEP_ANALYSIS: "true"

  # Duration Control
  TARGET_DURATION: "30"
  MUSIC_START: "0"
  MUSIC_END: "0"
