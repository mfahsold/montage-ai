apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: montage-ai

resources:
  - namespace.yaml
  - configmap.yaml
  - pvc.yaml
  - job.yaml
  - web-service.yaml
  - cgpu-server.yaml
  - registry.yaml
  - ingress.yaml
  - network-policies/networkpolicy-default-deny.yaml
  - network-policies/allow-registry-ingress.yaml
  - network-policies/allow-renderer-egress.yaml
  - network-policies/allow-cgpu-egress.yaml
  - network-policies/allow-web-ingress.yaml

labels:
  - pairs:
      app.kubernetes.io/name: montage-ai
      app.kubernetes.io/version: "1.0.0"
      app.kubernetes.io/managed-by: kustomize

# Image configuration - use local cluster registry
images:
  - name: ghcr.io/mfahsold/montage-ai
    newName: 192.168.1.12:5000/montage-ai
    newTag: latest
