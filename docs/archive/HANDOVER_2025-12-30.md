# Dev Team Handover - 30. Dezember 2025

## Session Summary

Umfangreiche Optimierungen und Infrastruktur-Arbeit für den kommenden kommerziellen Launch (ca. 1 Monat).

---

## Abgeschlossene Arbeiten

### 1. Distributed Rendering Infrastructure

**Neue Dateien:**
- `deploy/k3s/base/nfs-pv.yaml` - NFS PersistentVolumes für Multi-Node GPU Access
- `deploy/k3s/overlays/distributed/kustomization.yaml` - JSON Patch für Volume-Replacement
- `deploy/k3s/overlays/distributed/nfs-pvc.yaml` - NFS PersistentVolumeClaims

**Funktionsweise:**
- Jobs können auf JEDEM GPU-Node laufen (Jetson NVENC, AMD VAAPI)
- NFS-Storage ermöglicht Node-übergreifenden Datenzugriff
- Auto-Detection des GPU-Typs via `FFMPEG_HWACCEL=auto`

**Deployment:**
```bash
# NFS Server Setup (auf fluxibriserver):
sudo mkdir -p /mnt/nfs-montage/{input,music,output,assets}
echo "/mnt/nfs-montage *(rw,sync,no_subtree_check,no_root_squash)" | sudo tee -a /etc/exports
sudo exportfs -a

# Kubernetes Deployment:
kubectl apply -f deploy/k3s/base/nfs-pv.yaml
kubectl apply -k deploy/k3s/overlays/distributed/
```

### 3. Monetization & Strategy Infrastructure

**Neue Dateien:**
- `private/` - Verzeichnis für sensible Strategie-Dokumente (gitignored)
- `USER_CHECKLIST.md` - Manuelle Aufgaben für den Launch (Git Purge, Billing Setup)

**Änderungen:**
- **Voice Isolation Optimierung**: Nutzt nun `no_vocals` (Instrumental) für präzisere Beat-Detection. Timeout auf 1200s erhöht.
- **Config Updates**: `CloudConfig` in `config.py` für API-Keys und Endpoints.
- **Dokumentation**: `README.md` und `website/index.html` auf "Source Available" und "Pro Features" aktualisiert.
- **Security**: Sensible Docs (`market_analysis.md`, `roadmap/`) aus öffentlichen Links entfernt und in `private/` verschoben.

---

## Marktrecherche & USP

**USP:** "Einziger Open-Source, LLM-gesteuerter Post-Production Assistant mit Story Arc und NLE-Export"

**Wettbewerb:**
- **Generative AI (Sora, Runway)**: Wir polieren, wir generieren nicht.
- **Social Apps (CapCut)**: Wir sind Privacy-First und NLE-kompatibel.
- **Pro NLEs (Resolve)**: Wir sind der "Assistant Editor", der den Rough Cut liefert.

**Pricing Empfehlung:**
- **Free (Community)**: CLI, Local Processing.
- **Pro (Cloud)**: Cloud GPU Offloading, Hosted Web UI, Priority Support.
- **Enterprise**: On-Premise Kubernetes, SSO, Custom Styles.

---

## Bekannte Issues

- **Git History**: Sensible Dokumente müssen noch via `git filter-branch` gepurged werden (siehe `USER_CHECKLIST.md`).
- **NFS Setup**: Server-seitige Exports fehlen noch für Distributed Rendering.
- **Cloud Backend**: API-Endpoint `api.montage.ai` ist noch nicht deployed.

---

## Nächste Schritte (Priorität 1 Monat)

1.  **Git History Purge**: `USER_CHECKLIST.md` abarbeiten.
2.  **Cloud Backend**: Billing und API-Keys implementieren.
3.  **OTIO Export**: Finalisieren und mit Resolve testen.
4.  **Beat-Sync**: Benchmark gegen CapCut durchführen.
5.  **Launch Content**: "Before vs. After" Videos produzieren.

---

## Cluster-Status

| Node | Rolle | GPU | Status |
|------|-------|-----|--------|
| codeaijetson-desktop | Worker | NVIDIA Jetson (NVENC) | ✅ Ready |
| codeai-fluxibriserver | Worker | AMD Radeon (VAAPI) | ✅ Ready (Image Pull Issue) |
| codeai-worker-amd64 | Worker | - | ✅ Ready |

**Image Registry:** `192.168.1.12:5000/montage-ai:arm64` (Jetson), `localhost:5000/montage-ai:latest` (AMD)

---

## Nächste Schritte

### Vor Kommerzialisierung (1 Monat)

1. **NFS-Exports auf fluxibriserver einrichten** - Ermöglicht echtes Distributed Rendering
2. **OTIO-Export testen** - Mit echtem DaVinci Resolve Workflow
3. **CloudConfig implementieren** - Aktuell nur definiert, nicht genutzt
4. **Beat-Sync Benchmarking** - A/B Tests gegen CapCut
5. **Pricing-Modell finalisieren** - Open Core empfohlen

### Empfohlenes Pricing

| Tier | Preis | Features |
|------|-------|----------|
| **Free** | $0 | Basis-Features, lokale Verarbeitung, Community Support |
| **Pro** | $15-30/mo oder $150 einmalig | Cloud GPU, Premium Styles, Priority Support |
| **Enterprise** | $500-2000/Jahr | Volume Licensing, Custom Integration, SLA |

---

## Dateien dieser Session

### Neue Dateien
- `deploy/k3s/base/nfs-pv.yaml`
- `deploy/k3s/overlays/distributed/kustomization.yaml`
- `deploy/k3s/overlays/distributed/nfs-pvc.yaml`
- `docs/HANDOVER_2025-12-30.md` (dieses Dokument)

### Modifizierte Dateien
- `CHANGELOG.md`
- `deploy/k3s/README.md`
- `deploy/k3s/base/configmap.yaml`
- `docker-compose.yml`
- `docs/configuration.md`
- `montage-ai.sh`
- `src/montage_ai/cgpu_jobs/voice_isolation.py`
- `src/montage_ai/editor.py`
- `src/montage_ai/web_ui/app.py`
- `src/montage_ai/web_ui/static/app.js`
- `src/montage_ai/web_ui/templates/index.html`

---

## Kontakt

Bei Fragen zu dieser Session: Git History konsultieren (Commits ab `85f0173`).

---

*Erstellt: 30. Dezember 2025*
*Session: Distributed Rendering, Market Research, UI/DRY Improvements*
