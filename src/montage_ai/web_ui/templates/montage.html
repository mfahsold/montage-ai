<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Montage Creator - Voxel Studio</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/voxel-dark.css') }}">
</head>
<body>
    <nav class="navbar">
        <a href="/" class="nav-brand">
            <span>MONTAGE</span> AI
        </a>
        <div class="nav-links">
            <a href="/" class="nav-link">DASHBOARD</a>
            <a href="/montage" class="nav-link active">CREATOR</a>
            <a href="/gallery" class="nav-link">GALLERY</a>
            <a href="/settings" class="nav-link">SETTINGS</a>
        </div>
    </nav>

    <div class="container voxel-container">
        <div class="mb-8">
            <h1 class="voxel-title">NEW PROJECT</h1>
            <p class="text-muted">Configure your AI director parameters.</p>
        </div>

        <div class="grid grid-cols-3 gap-4">
            <!-- Left Panel: Controls -->
            <div class="voxel-card">
                <form action="/api/jobs" method="POST" id="montageForm">
                    <div class="mb-8">
                        <h3 class="mb-1">1. STYLE</h3>
                        <p class="text-xs text-muted mb-4">Select the editing rhythm and visual language.</p>
                        <div class="grid grid-cols-2 gap-2">
                            <label class="voxel-btn text-sm" style="text-align: center;">
                                <input type="radio" name="style" value="dynamic" checked style="display:none" onchange="selectStyle(this)">
                                DYNAMIC
                            </label>
                            <label class="voxel-btn text-sm" style="text-align: center;">
                                <input type="radio" name="style" value="hitchcock" style="display:none" onchange="selectStyle(this)">
                                HITCHCOCK
                            </label>
                            <label class="voxel-btn text-sm" style="text-align: center;">
                                <input type="radio" name="style" value="mtv" style="display:none" onchange="selectStyle(this)">
                                MTV
                            </label>
                            <label class="voxel-btn text-sm" style="text-align: center;">
                                <input type="radio" name="style" value="minimalist" style="display:none" onchange="selectStyle(this)">
                                MINIMAL
                            </label>
                        </div>
                    </div>

                    <div class="mb-8">
                        <h3 class="mb-1">2. DIRECTOR'S PROMPT</h3>
                        <p class="text-xs text-muted mb-4">Guide the AI with natural language instructions.</p>
                        <textarea class="voxel-input" name="prompt" rows="4" placeholder="Describe the vibe (e.g., 'High energy skate video with fast cuts on the beat')..."></textarea>
                    </div>

                    <div class="mb-8">
                        <h3 class="mb-1">3. OPTIONS</h3>
                        <p class="text-xs text-muted mb-4">Additional AI processing steps.</p>
                        <div class="flex flex-col gap-2">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="upscale" class="voxel-checkbox">
                                <div class="flex flex-col">
                                    <span class="text-sm">AI UPSCALE (4K)</span>
                                    <span class="text-xs text-muted">Enhance resolution using Real-ESRGAN.</span>
                                </div>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="stabilize" class="voxel-checkbox" checked>
                                <div class="flex flex-col">
                                    <span class="text-sm">STABILIZE FOOTAGE</span>
                                    <span class="text-xs text-muted">Remove camera shake via vid.stab.</span>
                                </div>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="auto_reframe" class="voxel-checkbox">
                                <div class="flex flex-col">
                                    <span class="text-sm">AUTO-REFRAME (9:16)</span>
                                    <span class="text-xs text-muted">Smart crop for vertical social media.</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <button type="submit" class="voxel-btn voxel-btn-primary w-full">START RENDER</button>
                </form>
            </div>

            <!-- Right Panel: Preview / Status -->
            <div class="voxel-card" style="grid-column: span 2;">
                <div class="flex justify-between items-center mb-4">
                    <h3>PREVIEW</h3>
                    <span class="badge">WAITING FOR INPUT</span>
                </div>
                
                <!-- Placeholder for Video Player -->
                <div style="background: #000; width: 100%; aspect-ratio: 16/9; display: flex; align-items: center; justify-content: center; border: 2px solid var(--border);">
                    <div class="text-center">
                        <p class="text-muted mb-2">NO PREVIEW AVAILABLE</p>
                        <p class="text-xs text-muted">Upload footage to /data/input to begin</p>
                    </div>
                </div>

                <div class="mt-8">
                    <h4 class="mb-2">LOGS</h4>
                    <div class="voxel-input" style="height: 150px; overflow-y: auto; font-family: monospace; font-size: 0.8rem; color: var(--muted-foreground);">
                        [SYSTEM] Ready to process.
                        [SYSTEM] GPU: NVIDIA A100 (Simulated)
                        [SYSTEM] Storage: 100GB Free
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function selectStyle(radio) {
            // Reset all buttons
            document.querySelectorAll('input[name="style"]').forEach(el => {
                el.parentElement.classList.remove('voxel-btn-primary');
            });
            // Highlight selected
            if(radio.checked) {
                radio.parentElement.classList.add('voxel-btn-primary');
            }
        }
        
        // Initialize first selection
        document.querySelector('input[name="style"]:checked').parentElement.classList.add('voxel-btn-primary');
    </script>
</body>
</html>
